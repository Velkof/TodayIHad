@model List<TodayIHad.Domain.Entities.LoggedFood>

@{
    ViewBag.Title = "Index";
}



<div id="foodSearchDiv" class="input-group">
    <span class="input-group-addon" aria-hidden="true"><span class="glyphicon glyphicon-search"></span></span>


    <input type="text" class="form-control" id="foodSearchBox" placeholder="Search for food" autocomplete="off" name="SearchFoodString" />
</div>

<ul id="foodSearchUL"></ul>



<div id="scoreInfoDiv"></div>
<div id="calorieInfoDiv"></div>

<div id="foodLogDialog" title="Log Food">

    <p id="foodLogDialogCalories">Calories: </p>
    <label>Amount</label>
    <input id="foodLogDialogAmountInput" type="number" value="100">
    <select id="foodLogDialogUnitSelect"></select>
    <input type="hidden" id="hiddenFieldfoodLogDialog" name="foodId" value="">
    <input type="button" id="logFoodSaveBtn" value="Save"/>

</div>

<div id="loggedFoodEditDialog" title="Food Edit">
    <p id="loggedFoodEditDialogCalories">Calories: </p>
    <label>Amount</label>
    <input id="loggedFoodEditDialogAmountInput" type="number" value="100">
    <select id="loggedFoodEditDialogUnitSelect"></select>
    <input type="hidden" id="hiddenFieldloggedFoodEditDialog" name="foodId" value="">
    <input type="hidden" id="hiddenLoggedFoodIdEditDialog" name="loggedFoodId" value="">
    <input type="hidden" id="hiddenTableRowNumber" name="loggedFoodId" value="">

    <input type="button" id="loggedFoodEditDialogDeleteBtn" value="Delete" />
    <input type="button" id="loggedFoodEditDialogUpdateBtn" value="Update"/>

</div>

<div id="tabs" style="display: none;">
    <ul>
        <li><a href="#tabs-1">Today's Food</a></li>
        <li><a href="#tabs-2">Calendar</a></li>
        <li><a href="#tabs-3">Stats</a></li>
    </ul>


    <div id="tabs-1">


        <table id="loggedFoodTable" class="table table-responsive table-condensed table-hover">
            <thead>
            <tr><th>Food Name</th> <th>Calories</th><th>Amount</th><th>Edit</th></tr>
            </thead>
            <tbody>
                @foreach (var item in Model.OrderByDescending(x => x.DateCreated))
                {
                    <tr>
                        <td style="display: none;">
                            @Html.DisplayFor(modelItem => item.FoodId)
                        </td>
                        <td style="display: none;">
                            @Html.DisplayFor(modelItem => item.DateCreated)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Calories)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Amount) @Html.DisplayFor(modelItem => item.Unit)
                        </td>

                        <td class="editLoggedFoodTd">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                        </td>
                    </tr>

                }
            </tbody>
        </table>
    </div>

    <div id="tabs-2">
        <div id="datepicker"></div>

    </div>
    <div id="tabs-3">Stats will be here...</div>
</div>



@section Scripts {

    <script type="text/javascript">

        //$(document)
        //    .ready(function () {
        //        $("#foodSearchBox")
        //            .on("input",
        //                function () {
        //                    var food = $('#foodSearchBox').val();
        //                    $.ajax({
        //                        type: 'POST',
        //                        url: '/Dashboard/SearchFood',
        //                        data: { searchFoodString: food },
        //                        success: function (data) {
        //                            $("#foodSearchUL").empty();
        //                            for (var i in data) {
        //                                for (var j in data[i]) {
        //                                    $("#foodSearchUL")
        //                                        .append('<li class="foodSearchResultsLI list-group-item">' +
        //                                            data[i][j].Name +
        //                                            '</li>');
        //                                }
        //                            }
        //                        },
        //                        error: function () {
        //                            alert("Failed");
        //                        }
        //                    });
        //                });
        //        $("#foodSearchUL")
        //            .on("click",
        //                "li",
        //                function () {
        //                    var selectedFoodName = $(this).html();
        //                    $.ajax({
        //                        type: 'POST',
        //                        url: '/Dashboard/GetSelectedFood',
        //                        data: { foodName: selectedFoodName },
        //                        success: function (data) {
        //                            $("#foodSearchUL").empty();
        //                            $("#foodLogDialog").dialog("open");
        //                            for (var i in data) {
        //                                $("#foodLogDialog").dialog('option', 'title', data[i].food.Name);
        //                                $("#foodLogDialog").prepend("<p>Calories per 100g: " +
        //                                    data[i].food.CaloriesKcal + "</p>");
        //                                $("#hiddenFieldfoodLogDialog").val(data[i].food.Id);
        //                                for (var j in data[i].foodUnits) {
        //                                    $("#foodLogDialogAmountInput").val(100);
        //                                    if (data[i].foodUnits[j].Name == "gr") {
        //                                        $("#foodLogDialogUnitSelect")
        //                                            .append("<option value=\'" +
        //                                                data[i].foodUnits[j].Name +
        //                                                "\'  selected='selected'>" +
        //                                                data[i].foodUnits[j].Name +
        //                                                "</option>");
        //                                    } else {
        //                                        $("#foodLogDialogUnitSelect")
        //                                            .append("<option value=\'" +
        //                                                data[i].foodUnits[j].Name + "\'>" +
        //                                                data[i].foodUnits[j].Name + "</option>");
        //                                    }
        //                                }
        //                            }
        //                        },
        //                        error: function () {
        //                            alert("fail");
        //                        }
        //                    });
        //                });
        //    });
        //$("#foodLogDialog")
        //    .dialog({
        //        //closeText: "hide",
        //        my: "center",
        //        at: "center",
        //        of: window,
        //        autoOpen: false,
        //    });
        //$("#tabs").tabs();
        //$("#tabs").css("display", "block");


    </script>

}
